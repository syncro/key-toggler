{"version":3,"file":"key-toggler-bundle.js","sources":["../src/key-toggler.js","../index.js"],"sourcesContent":["/**\n *\n * web component that shows and hides any element by selector after hotkey pressed\n *\n * <key-toggler target-sl=\"#header\" mod-key=\"ctrl\" key=\"c\"></key-toggler>\n\n <script type=\"module\">\n import { KeyToggler } from '/path/to/key-toggler.js';\n\n customElements.define('key-toggler', KeyToggler);\n </script>\n *\n *\n */\n\nexport const KEY_DEFAULT = 'c';\nexport const KEY_ATTR_NAME = 'key';\nexport const MOD_ATTR_NAME = 'mod-key';\nexport const TARGET_ATTR_NAME = 'target-sl';\n\nexport class KeyToggler extends HTMLElement {\n\n    isVisible(el) {\n        return !! (el.offsetWidth || el.offsetHeight || el.getClientRects().length);\n    }\n\n    get targetEl() {\n        if (! this._targetEl) {\n            if (this.hasAttribute(TARGET_ATTR_NAME)) {\n                this._targetEl = document.querySelector(this.getAttribute(TARGET_ATTR_NAME));\n            } else {\n                console.warn('no selector provided for key toggler custom element');\n            }\n        }\n        return this._targetEl;\n    }\n\n    modKeyPressed(event) {\n        if (this.hasAttribute(MOD_ATTR_NAME)) {\n            let value = false;\n            switch (this.getAttribute(MOD_ATTR_NAME)) {\n                case 'meta':\n                    value = (event.metaKey);\n                    break;\n                case 'shift':\n                    value = (event.shiftKey);\n                    break;\n                default:\n                    value = (event.ctrlKey);\n                    break;\n            }\n            return value;\n        } else {\n            return (event.ctrlKey);\n        }\n    }\n\n    letterKeyPressed(event) {\n        let key = KEY_DEFAULT;\n        if (this.hasAttribute(KEY_ATTR_NAME) && this.getAttribute(KEY_ATTR_NAME).match(/a-Az-Z/)) {\n            this.key = this.getAttribute(KEY_ATTR_NAME);\n        }\n        return (String.fromCharCode(event.which).toLowerCase() === key);\n    }\n\n    toggleTarget(event) {\n        if (this.modKeyPressed(event) && this.letterKeyPressed(event)) {\n            if (this.isVisible(this.targetEl)) {\n                this._oldDisplay = this.targetEl.style.display;\n                this.targetEl.style.display = 'none';\n            } else {\n                this.targetEl.style.display = this._oldDisplay || 'block';\n            }\n        }\n    }\n\n    callMethod(event) {\n        let methodName = this.getAttribute('action');\n        if (methodName && typeof this.targetEl[methodName] === 'function') {\n            this.targetEl.methodName.call(this.targetEl, event);\n        }\n    }\n\n    fireEvent(event) {\n        let eventName = this.getAttribute('event');\n        this.targetEl.dispatchEvent(new CustomEvent(eventName));\n    }\n\n    connectedCallback() {\n        if (this.hasAttribute('action')) {\n            this.keyHandle = this.callMethod.bind(this);\n        } else if (this.hasAttribute('event')) {\n            this.keyHandle = this.fireEvent.bind(this);\n        } else {\n            this.keyHandle = this.toggleTarget.bind(this);\n        }\n        document.addEventListener('keydown', this.keyHandle);\n    }\n\n    disconnectedCallback() {\n        if (this.keyHandle) {\n            document.removeEventListener('keydown', this.keyHandle);\n        }\n    }\n}\n\n","\n\nimport { KeyToggler } from './src/key-toggler.js';\n\nexport { KeyToggler };\n\nexport const AUTOREG_ATTR_NAME = 'key-toggler-autoreg';\nexport const AUTOREG_TAG_NAME = 'key-toggler';\n\nexport const regKeyToggler = function() {\n\n    if (document.body.classList.contains(AUTOREG_ATTR_NAME)) {\n\n        customElements.define(AUTOREG_TAG_NAME, KeyToggler);\n    }\n\n}\n\nregKeyToggler();"],"names":["KEY_DEFAULT","KEY_ATTR_NAME","MOD_ATTR_NAME","TARGET_ATTR_NAME","KeyToggler","el","offsetWidth","offsetHeight","getClientRects","length","event","hasAttribute","value","getAttribute","metaKey","shiftKey","ctrlKey","key","match","String","fromCharCode","which","toLowerCase","modKeyPressed","letterKeyPressed","isVisible","targetEl","_oldDisplay","style","display","methodName","call","eventName","dispatchEvent","CustomEvent","keyHandle","callMethod","bind","fireEvent","toggleTarget","document","addEventListener","removeEventListener","_targetEl","querySelector","console","warn","HTMLElement","AUTOREG_ATTR_NAME","AUTOREG_TAG_NAME","regKeyToggler","body","classList","contains","customElements","define"],"mappings":"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"}